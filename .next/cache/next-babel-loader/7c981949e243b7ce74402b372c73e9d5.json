{"ast":null,"code":"var _jsxFileName = \"/Users/patriciot/Projects/personal/carne-frontend-v2/pages/issue.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Global from '../components/Global';\nimport HerospaceIssue from '../components/issue/Herospace';\nimport Playlist from '../components/home/Playlist';\nimport IssueDetail from '../components/issue/Artist';\n\nfunction Issue(_ref) {\n  var currentIssue = _ref.currentIssue;\n  // getIssuePlaylist = number => {\n  //   fetch(`https://admin.carnemag.co/playlists/${number}`)\n  //     .then(response => response.json())\n  //     .then( issuePlaylist => this.setState({issuePlaylist}))\n  // }\n  // getArtist = ids => {\n  //   let artistsIds = ids.map(el => [`id_in=${el.id}`]).join('&')\n  //   fetch(`https://admin.carnemag.co/artists?${artistsIds}`)\n  //     .then(res => res.json())\n  //     .then(artistList => this.getWorks(artistList))\n  // }\n  // getWorks = async artist => {\n  //   let load = []\n  //   artist.forEach(el => {      \n  //     load.push(el.works.map(work => [`id_in=${work.id}`]).join('&'))\n  //   })\n  //   const mapper = q => fetch(`https://admin.carnemag.co/works?${q}`).then(r => r.json())\n  //   const responses = await Promise.map(load, mapper, { concurrency: 20 })\n  //   const full = artist.map((el, i) => ({ ...el, workList: responses[i] }))\n  //   this.setState({ fullArtist: full })\n  // }\n  // componentDidMount() {\n  //   let issue = this.props.currentIssue\n  //   if(issue.artists) {\n  //     this.getArtist(issue.artists)\n  //   }\n  //   if(issue.playlist) {\n  //     this.getIssuePlaylist(issue.playlist.id)\n  //   }\n  // }\n  // const { issuePlaylist, fullArtist } = this.state\n  return __jsx(React.Fragment, null, __jsx(Layout, {\n    title: \"Carnemag\\xAE | Issues\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, currentIssue && __jsx(HerospaceIssue, {\n    issue: currentIssue,\n    currentYear: Global.getCurrentYear(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  })));\n}\n\nexport var __N_SSP = true;\nexport default Issue;","map":{"version":3,"sources":["/Users/patriciot/Projects/personal/carne-frontend-v2/pages/issue.js"],"names":["React","Global","HerospaceIssue","Playlist","IssueDetail","Issue","currentIssue","getCurrentYear"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,QAAP,MAAqB,6BAArB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;;AAEA,SAASC,KAAT,OAAiC;AAAA,MAAhBC,YAAgB,QAAhBA,YAAgB;AAE/B;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEE;AAEA,SACE,4BACE,MAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACIA,YAAY,IACZ,MAAC,cAAD;AAAgB,IAAA,KAAK,EAAGA,YAAxB;AAAuC,IAAA,WAAW,EAAGL,MAAM,CAACM,cAAP,EAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADF,CADF;AAmBH;;;AASD,eAAeF,KAAf","sourcesContent":["import React from 'react'\nimport fetch from 'node-fetch'\n\nimport Global from '../components/Global'\nimport HerospaceIssue from '../components/issue/Herospace'\nimport Playlist from '../components/home/Playlist'\nimport IssueDetail from '../components/issue/Artist'\n\nfunction Issue({ currentIssue }) {\n\n  // getIssuePlaylist = number => {\n  //   fetch(`https://admin.carnemag.co/playlists/${number}`)\n  //     .then(response => response.json())\n  //     .then( issuePlaylist => this.setState({issuePlaylist}))\n  // }\n\n  // getArtist = ids => {\n  //   let artistsIds = ids.map(el => [`id_in=${el.id}`]).join('&')\n\n  //   fetch(`https://admin.carnemag.co/artists?${artistsIds}`)\n  //     .then(res => res.json())\n  //     .then(artistList => this.getWorks(artistList))\n  // }\n\n  // getWorks = async artist => {\n  //   let load = []\n\n  //   artist.forEach(el => {      \n  //     load.push(el.works.map(work => [`id_in=${work.id}`]).join('&'))\n  //   })\n\n  //   const mapper = q => fetch(`https://admin.carnemag.co/works?${q}`).then(r => r.json())\n  //   const responses = await Promise.map(load, mapper, { concurrency: 20 })\n\n  //   const full = artist.map((el, i) => ({ ...el, workList: responses[i] }))\n\n  //   this.setState({ fullArtist: full })\n  // }\n\n  // componentDidMount() {\n  //   let issue = this.props.currentIssue\n\n  //   if(issue.artists) {\n  //     this.getArtist(issue.artists)\n  //   }\n\n  //   if(issue.playlist) {\n  //     this.getIssuePlaylist(issue.playlist.id)\n  //   }\n  // }\n\n    // const { issuePlaylist, fullArtist } = this.state\n\n    return (\n      <>\n        <Layout title=\"CarnemagÂ® | Issues\">\n          { currentIssue &&\n            <HerospaceIssue issue={ currentIssue } currentYear={ Global.getCurrentYear() } />\n          }\n\n          {/* { issuePlaylist && \n            <Playlist issuePlaylist={ issuePlaylist } currentYear={ Global.getCurrentYear() } />\n          }\n\n          { fullArtist &&\n            fullArtist.map((artist, index) => (\n              <IssueDetail key={ index } model={ artist } currentYear={ Global.getCurrentYear() } />\n            ))\n          } */}\n        </Layout>\n      </>\n    )\n}\n\nexport async function getServerSideProps({ query }) {\n  const res = await fetch(`https://admin.carnemag.co/issues?number=${query.slug}`)\n  const json = await res.json()\n\n  return { currentIssue: json[0] }\n}\n\nexport default Issue"]},"metadata":{},"sourceType":"module"}