{"version":3,"file":"static/webpack/static/development/pages/issue.js.8d5e5b3a5819b7d0b10a.hot-update.js","sources":["webpack:///./pages/issue.js"],"sourcesContent":["import React from 'react'\nimport fetch from 'node-fetch'\n\nimport Global from '../components/Global'\nimport Layout from '../components/Layout'\nimport HerospaceIssue from '../components/issue/Herospace'\nimport Playlist from '../components/home/Playlist'\nimport IssueDetail from '../components/issue/Artist'\n\nfunction Issue({ currentIssue }) {\n\n  // getIssuePlaylist = number => {\n  //   fetch(`https://admin.carnemag.co/playlists/${number}`)\n  //     .then(response => response.json())\n  //     .then( issuePlaylist => this.setState({issuePlaylist}))\n  // }\n\n  // getArtist = ids => {\n  //   let artistsIds = ids.map(el => [`id_in=${el.id}`]).join('&')\n\n  //   fetch(`https://admin.carnemag.co/artists?${artistsIds}`)\n  //     .then(res => res.json())\n  //     .then(artistList => this.getWorks(artistList))\n  // }\n\n  // getWorks = async artist => {\n  //   let load = []\n\n  //   artist.forEach(el => {      \n  //     load.push(el.works.map(work => [`id_in=${work.id}`]).join('&'))\n  //   })\n\n  //   const mapper = q => fetch(`https://admin.carnemag.co/works?${q}`).then(r => r.json())\n  //   const responses = await Promise.map(load, mapper, { concurrency: 20 })\n\n  //   const full = artist.map((el, i) => ({ ...el, workList: responses[i] }))\n\n  //   this.setState({ fullArtist: full })\n  // }\n\n  // componentDidMount() {\n  //   let issue = this.props.currentIssue\n\n  //   if(issue.artists) {\n  //     this.getArtist(issue.artists)\n  //   }\n\n  //   if(issue.playlist) {\n  //     this.getIssuePlaylist(issue.playlist.id)\n  //   }\n  // }\n\n    // const { issuePlaylist, fullArtist } = this.state\n\n    return (\n      <>\n        <Layout title=\"CarnemagÂ® | Issues\">\n          { currentIssue &&\n            <HerospaceIssue issue={ currentIssue } currentYear={ Global.getCurrentYear() } />\n          }\n\n          {/* { issuePlaylist && \n            <Playlist issuePlaylist={ issuePlaylist } currentYear={ Global.getCurrentYear() } />\n          }\n\n          { fullArtist &&\n            fullArtist.map((artist, index) => (\n              <IssueDetail key={ index } model={ artist } currentYear={ Global.getCurrentYear() } />\n            ))\n          } */}\n        </Layout>\n      </>\n    )\n}\n\nexport async function getServerSideProps({ query }) {\n  const res = await fetch(`http://admin.carnemag.co:1337/issues?Number=${query.Number}`)\n  const currentIssue = await res.json()\n\n  return {\n    props : {\n      currentIssue\n    }\n  }\n}\n\nexport default Issue"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;;AAYA;;;;A","sourceRoot":""}